name: "Ipo results"

on:

  workflow_dispatch:
    inputs:
      IPONUMBER:
        description: Choose number of ipo result 
        required: true
        default: "10"
        
jobs:

  Ipo_results:
    name: Self
    runs-on: ubuntu-20.04
    strategy:
      fail-fast: false
    steps:
      - name: Checkout
        uses: actions/checkout@v2
      - name: Cypress run
        uses: cypress-io/github-action@v4
        with:
          spec: cypress/e2e/main.cy.js
        env:
          CYPRESS_USERNAME: ${{ secrets.USERNAME }}
          CYPRESS_DPID: ${{ secrets.DPID }}
          CYPRESS_PASSWORD: ${{ secrets.PASSWORD }}
          CYPRESS_BANK: ${{ secrets.BANK }}
          CYPRESS_IPONUMBER: ${{ github.event.inputs.IPONUMBER }}
          EMAIL_USER: ${{ secrets.EMAIL_USER }}
          EMAIL_PASSWORD: ${{ secrets.EMAIL_PASSWORD }}

           
      - name: Save screenshot
        uses: actions/upload-artifact@v2
        with:
          name: screenshot
          path: cypress/screenshots
          retention-days: 10